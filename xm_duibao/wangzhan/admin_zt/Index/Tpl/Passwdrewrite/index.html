<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<load href="__PUBLIC__/Css/admin.css" />

<script type="text/javascript" src="__PUBLIC__/Js/jquery.min.js"></script>
<script type="text/javascript" src="__PUBLIC__/Js/themain.js"></script>
<script type="text/javascript">
$("document").ready(function(){
	
	$('#passwd').keyup(function(e) {
		var strongRegex = new RegExp("^(?=.{8,})(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*\\W).*$", "g");
		var mediumRegex = new RegExp("^(?=.{7,})(((?=.*[A-Z])(?=.*[a-z]))|((?=.*[A-Z])(?=.*[0-9]))|((?=.*[a-z])(?=.*[0-9]))).*$", "g");
		var enoughRegex = new RegExp("(?=.{6,}).*", "g");
		if (false == enoughRegex.test($(this).val())) {
			$('#passstrength').html('<font color="red">字符太少了</font>');
		} else if (strongRegex.test($(this).val())) {
			$('#passstrength').className = 'ok';
			$('#passstrength').html('<font color="purple">超级强壮!</font>');
		} else if (mediumRegex.test($(this).val())) {
			$('#passstrength').className = 'alert';
			$('#passstrength').html('<font color="blue">还可以!</font>');
		} else {
			$('#passstrength').className = 'error';
			$('#passstrength').html('<font color="red">真的太弱了!<red>');
		}
		return true;
	});
	
	$('#repasswd').keyup(function(e) {
		var strongRegex = new RegExp("^(?=.{8,})(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*\\W).*$", "g");
		var mediumRegex = new RegExp("^(?=.{7,})(((?=.*[A-Z])(?=.*[a-z]))|((?=.*[A-Z])(?=.*[0-9]))|((?=.*[a-z])(?=.*[0-9]))).*$", "g");
		var enoughRegex = new RegExp("(?=.{6,}).*", "g");
		if (false == enoughRegex.test($(this).val())) {
			$('#passstrengthx').html('<font color="red">字符太少了</font>');
		} else if (strongRegex.test($(this).val())) {
			$('#passstrengthx').className = 'ok';
			$('#passstrengthx').html('<font color="purple">超级强壮!</font>');
		} else if (mediumRegex.test($(this).val())) {
			$('#passstrengthx').className = 'alert';
			$('#passstrengthx').html('<font color="blue">还可以!</font>');
		} else {
			$('#passstrengthx').className = 'error';
			$('#passstrengthx').html('<font color="red">真的太弱了!<red>');
		}
		return true;
	});
	
	$("#submit").click(function(){
		var passwd    = $("#passwd").val();
		var repasswd  = $("#repasswd").val();
		var oldpasswd = $("#oldpasswd").val();
		
		if(oldpasswd=='') {
			alert('原密码不可以为空');
			return false;
		}else if(passwd=='' || repasswd=='') {
			alert('新密码不可以为空');
			return false;
		}else {
			if(passwd!=repasswd) {
				alert('两次密码不一致，请重新输入');
				return false;
			}else {
				if(confirm('你确定要修改密码吗？')) {
					
				}else {
					return false;
				}
			}
		}
		
	});
	
});


</script>

</head>

<table cellspacing=0 cellpadding=0 width="100%" align=center border=0 style="margin-left:0px;margin-top:0px;">
	<tr height="28"><td>
		<font size="-1" ><b>当前位置&nbsp;#&nbsp;用户管理&nbsp;#&nbsp;用户密码修改</b></font></td></tr>
	<tr><td bgcolor="#b1ceef" height="1"></td></tr>
	<tr height="20"><td></td></tr>
</table>

<body>
<br/><br/>
<form  method="post" action="__APP__/Passwdrewrite/rewritepasswd" >

<table cellspacing="0" cellpadding="5" width="800px" border="0" style="font-size:12px;border-collapse:collapse">

<tr>
	<td width="150px" align="right">用户名：</td>
	<td width="650px"><b>{$username}</b></td>
</tr>
<tr>
	<td width="150px" align="right">姓名：</td>
	<td width="650px"><b>{$xingming}</b></td>
</tr>
<tr>
	<td align="right">&nbsp;</td>
	<td></td>
</tr>
<tr>
	<td align="right">请输入原密码：</td>
	<td>
		<input type="password" name="oldpasswd" id="oldpasswd" size="32" maxlength="32" onkeydown="if(event.keyCode=='32'){return false;}" />
	</td>
</tr>
<tr>
	<td align="right">&nbsp;</td>
	<td></td>
</tr>
<tr>
	<td align="right">请输入新密码：</td>
	<td >
		<input type="password" name="passwd" id="passwd" size="32" maxlength="32" onkeydown="if(event.keyCode=='32'){return false;}" />
		<span id="passstrength"></span>
	</td>
</tr>
<tr>
	<td  align="right">请再次输入新密码：</td>
	<td >
		<input type="password" name="repasswd" id="repasswd" size="32" maxlength="32" onkeydown="if(event.keyCode=='32'){return false;}" />
		<span id="passstrengthx"></span>
	</td>
</tr>
<tr>
	<td align="right">&nbsp;</td>
	<td ></td>
</tr>
<tr>
	<td  align="right">
		<input type="submit" class="yubutton yuwhite" id="submit" name="submit" value="确认修改密码" />
	</td>
	<td ></td>
</tr>

</table>


</form>
<br/><br/><br/><br/><br/><br/>

</body>
</html>